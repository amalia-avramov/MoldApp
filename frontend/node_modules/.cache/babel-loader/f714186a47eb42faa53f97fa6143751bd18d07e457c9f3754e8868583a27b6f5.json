{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\nimport { server } from \"../../utils\";\nexport function useLogin() {\n  _s();\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    },\n    getValues\n  } = useForm({\n    mode: \"onChange\"\n  });\n  const [alert, setAlert] = useState(false);\n  const navigate = useNavigate();\n  const onSubmit = async () => {\n    setAlert(false);\n    const postData = getValues();\n    const result = await fetch(`${server}/auth/login`, {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-access-token\": \"token-value\"\n      },\n      body: JSON.stringify(postData)\n    });\n    if (!result.ok) {\n      setAlert(true);\n    } else {\n      var _data$user;\n      const data = await result.json();\n      conso;\n      localStorage.setItem('loggedUserId', (_data$user = data.user) === null || _data$user === void 0 ? void 0 : _data$user._id);\n      console.log(data);\n      navigate(\"/dashboard\");\n    }\n  };\n  return {\n    alert,\n    errors,\n    register,\n    onSubmit: handleSubmit(onSubmit)\n  };\n}\n_s(useLogin, \"kso5lQGmhiex6Wxl2nQROew6V2E=\", false, function () {\n  return [useForm, useNavigate];\n});","map":{"version":3,"names":["useState","useForm","useNavigate","server","useLogin","_s","register","handleSubmit","formState","errors","getValues","mode","alert","setAlert","navigate","onSubmit","postData","result","fetch","method","headers","body","JSON","stringify","ok","_data$user","data","json","conso","localStorage","setItem","user","_id","console","log"],"sources":["/Users/amaliaavramov/MoldApp/frontend/src/pages/login/useLogin.ts"],"sourcesContent":["import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\nimport { server } from \"../../utils\";\nimport { LoginUser, User } from \"../../types\";\n\nexport function useLogin() {\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    getValues,\n  } = useForm<User>({ mode: \"onChange\" });\n  const [alert, setAlert] = useState(false);\n  const navigate = useNavigate();\n\n  const onSubmit = async () => {\n    setAlert(false);\n    const postData = getValues();\n    const result = await fetch(`${server}/auth/login`, {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-access-token\": \"token-value\",\n      },\n      body: JSON.stringify(postData),\n    });\n    if (!result.ok) {\n      setAlert(true);\n    } else {\n      const data: LoginUser = await result.json();\n      conso\n      localStorage.setItem('loggedUserId', data.user?._id);\n      console.log(data);\n      navigate(\"/dashboard\");\n    }\n  };\n\n  return {\n    alert,\n    errors,\n    register,\n    onSubmit: handleSubmit(onSubmit),\n  };\n}\n"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,OAAO,QAAQ,iBAAiB;AACzC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,MAAM,QAAQ,aAAa;AAGpC,OAAO,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EACzB,MAAM;IACJC,QAAQ;IACRC,YAAY;IACZC,SAAS,EAAE;MAAEC;IAAO,CAAC;IACrBC;EACF,CAAC,GAAGT,OAAO,CAAO;IAAEU,IAAI,EAAE;EAAW,CAAC,CAAC;EACvC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EACzC,MAAMc,QAAQ,GAAGZ,WAAW,CAAC,CAAC;EAE9B,MAAMa,QAAQ,GAAG,MAAAA,CAAA,KAAY;IAC3BF,QAAQ,CAAC,KAAK,CAAC;IACf,MAAMG,QAAQ,GAAGN,SAAS,CAAC,CAAC;IAC5B,MAAMO,MAAM,GAAG,MAAMC,KAAK,CAAE,GAAEf,MAAO,aAAY,EAAE;MACjDgB,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,gBAAgB,EAAE;MACpB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,QAAQ;IAC/B,CAAC,CAAC;IACF,IAAI,CAACC,MAAM,CAACO,EAAE,EAAE;MACdX,QAAQ,CAAC,IAAI,CAAC;IAChB,CAAC,MAAM;MAAA,IAAAY,UAAA;MACL,MAAMC,IAAe,GAAG,MAAMT,MAAM,CAACU,IAAI,CAAC,CAAC;MAC3CC,KAAK;MACLC,YAAY,CAACC,OAAO,CAAC,cAAc,GAAAL,UAAA,GAAEC,IAAI,CAACK,IAAI,cAAAN,UAAA,uBAATA,UAAA,CAAWO,GAAG,CAAC;MACpDC,OAAO,CAACC,GAAG,CAACR,IAAI,CAAC;MACjBZ,QAAQ,CAAC,YAAY,CAAC;IACxB;EACF,CAAC;EAED,OAAO;IACLF,KAAK;IACLH,MAAM;IACNH,QAAQ;IACRS,QAAQ,EAAER,YAAY,CAACQ,QAAQ;EACjC,CAAC;AACH;AAACV,EAAA,CAtCeD,QAAQ;EAAA,QAMlBH,OAAO,EAEMC,WAAW;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}